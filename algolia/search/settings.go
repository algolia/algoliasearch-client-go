// Code generated by go generate. DO NOT EDIT.

package search

import (
	"encoding/json"
	"fmt"

	"github.com/algolia/algoliasearch-client-go/algolia/opt"
)

type Settings struct {
	SearchableAttributes              *opt.SearchableAttributesOption              `json:"searchableAttributes,omitempty"`
	AttributesForFaceting             *opt.AttributesForFacetingOption             `json:"attributesForFaceting,omitempty"`
	UnretrievableAttributes           *opt.UnretrievableAttributesOption           `json:"unretrievableAttributes,omitempty"`
	AttributesToRetrieve              *opt.AttributesToRetrieveOption              `json:"attributesToRetrieve,omitempty"`
	Ranking                           *opt.RankingOption                           `json:"ranking,omitempty"`
	CustomRanking                     *opt.CustomRankingOption                     `json:"customRanking,omitempty"`
	Replicas                          *opt.ReplicasOption                          `json:"replicas,omitempty"`
	MaxValuesPerFacet                 *opt.MaxValuesPerFacetOption                 `json:"maxValuesPerFacet,omitempty"`
	SortFacetValuesBy                 *opt.SortFacetValuesByOption                 `json:"sortFacetValuesBy,omitempty"`
	AttributesToHighlight             *opt.AttributesToHighlightOption             `json:"attributesToHighlight,omitempty"`
	AttributesToSnippet               *opt.AttributesToSnippetOption               `json:"attributesToSnippet,omitempty"`
	HighlightPreTag                   *opt.HighlightPreTagOption                   `json:"highlightPreTag,omitempty"`
	HighlightPostTag                  *opt.HighlightPostTagOption                  `json:"highlightPostTag,omitempty"`
	SnippetEllipsisText               *opt.SnippetEllipsisTextOption               `json:"snippetEllipsisText,omitempty"`
	RestrictHighlightAndSnippetArrays *opt.RestrictHighlightAndSnippetArraysOption `json:"restrictHighlightAndSnippetArrays,omitempty"`
	HitsPerPage                       *opt.HitsPerPageOption                       `json:"hitsPerPage,omitempty"`
	PaginationLimitedTo               *opt.PaginationLimitedToOption               `json:"paginationLimitedTo,omitempty"`
	MinWordSizefor1Typo               *opt.MinWordSizefor1TypoOption               `json:"minWordSizefor1Typo,omitempty"`
	MinWordSizefor2Typos              *opt.MinWordSizefor2TyposOption              `json:"minWordSizefor2Typos,omitempty"`
	TypoTolerance                     *opt.TypoToleranceOption                     `json:"typoTolerance,omitempty"`
	AllowTyposOnNumericTokens         *opt.AllowTyposOnNumericTokensOption         `json:"allowTyposOnNumericTokens,omitempty"`
	DisableTypoToleranceOnAttributes  *opt.DisableTypoToleranceOnAttributesOption  `json:"disableTypoToleranceOnAttributes,omitempty"`
	DisableTypoToleranceOnWords       *opt.DisableTypoToleranceOnWordsOption       `json:"disableTypoToleranceOnWords,omitempty"`
	SeparatorsToIndex                 *opt.SeparatorsToIndexOption                 `json:"separatorsToIndex,omitempty"`
	IgnorePlurals                     *opt.IgnorePluralsOption                     `json:"ignorePlurals,omitempty"`
	RemoveStopWords                   *opt.RemoveStopWordsOption                   `json:"removeStopWords,omitempty"`
	CamelCaseAttributes               *opt.CamelCaseAttributesOption               `json:"camelCaseAttributes,omitempty"`
	DecompoundedAttributes            *opt.DecompoundedAttributesOption            `json:"decompoundedAttributes,omitempty"`
	KeepDiacriticsOnCharacters        *opt.KeepDiacriticsOnCharactersOption        `json:"keepDiacriticsOnCharacters,omitempty"`
	QueryLanguages                    *opt.QueryLanguagesOption                    `json:"queryLanguages,omitempty"`
	QueryType                         *opt.QueryTypeOption                         `json:"queryType,omitempty"`
	RemoveWordsIfNoResults            *opt.RemoveWordsIfNoResultsOption            `json:"removeWordsIfNoResults,omitempty"`
	AdvancedSyntax                    *opt.AdvancedSyntaxOption                    `json:"advancedSyntax,omitempty"`
	OptionalWords                     *opt.OptionalWordsOption                     `json:"optionalWords,omitempty"`
	DisablePrefixOnAttributes         *opt.DisablePrefixOnAttributesOption         `json:"disablePrefixOnAttributes,omitempty"`
	DisableExactOnAttributes          *opt.DisableExactOnAttributesOption          `json:"disableExactOnAttributes,omitempty"`
	ExactOnSingleWordQuery            *opt.ExactOnSingleWordQueryOption            `json:"exactOnSingleWordQuery,omitempty"`
	AlternativesAsExact               *opt.AlternativesAsExactOption               `json:"alternativesAsExact,omitempty"`
	AdvancedSyntaxFeatures            *opt.AdvancedSyntaxFeaturesOption            `json:"advancedSyntaxFeatures,omitempty"`
	EnableRules                       *opt.EnableRulesOption                       `json:"enableRules,omitempty"`
	NumericAttributesForFiltering     *opt.NumericAttributesForFilteringOption     `json:"numericAttributesForFiltering,omitempty"`
	AllowCompressionOfIntegerArray    *opt.AllowCompressionOfIntegerArrayOption    `json:"allowCompressionOfIntegerArray,omitempty"`
	AttributeForDistinct              *opt.AttributeForDistinctOption              `json:"attributeForDistinct,omitempty"`
	Distinct                          *opt.DistinctOption                          `json:"distinct,omitempty"`
	ReplaceSynonymsInHighlight        *opt.ReplaceSynonymsInHighlightOption        `json:"replaceSynonymsInHighlight,omitempty"`
	MinProximity                      *opt.MinProximityOption                      `json:"minProximity,omitempty"`
	ResponseFields                    *opt.ResponseFieldsOption                    `json:"responseFields,omitempty"`
	MaxFacetHits                      *opt.MaxFacetHitsOption                      `json:"maxFacetHits,omitempty"`
}

type settings Settings

type backwardCompatibleSettings struct {
	AttributesToIndex        *opt.SearchableAttributesOption          `json:"attributesToIndex,omitempty"`
	Slaves                   *opt.ReplicasOption                      `json:"slaves,omitempty"`
	NumericAttributesToIndex *opt.NumericAttributesForFilteringOption `json:"numericAttributesToIndex,omitempty"`
}

func (s *Settings) UnmarshalJSON(data []byte) error {
	var bcSettings backwardCompatibleSettings
	err := json.Unmarshal(data, &bcSettings)
	if err != nil {
		return fmt.Errorf("cannot unmarshal backward-compatible settings: %v", err)
	}

	err = json.Unmarshal(data, (*settings)(s))
	if err != nil {
		return fmt.Errorf("cannot unmarshal settings: %v", err)
	}

	if s.SearchableAttributes == nil {
		s.SearchableAttributes = bcSettings.AttributesToIndex
	}

	if s.Replicas == nil {
		s.Replicas = bcSettings.Slaves
	}

	if s.NumericAttributesForFiltering == nil {
		s.NumericAttributesForFiltering = bcSettings.NumericAttributesToIndex
	}

	return nil
}

func (s Settings) Equal(s2 Settings) bool {
	if !opt.SearchableAttributesEqual(s.SearchableAttributes, s2.SearchableAttributes) {
		return false
	}
	if !opt.AttributesForFacetingEqual(s.AttributesForFaceting, s2.AttributesForFaceting) {
		return false
	}
	if !opt.UnretrievableAttributesEqual(s.UnretrievableAttributes, s2.UnretrievableAttributes) {
		return false
	}
	if !opt.AttributesToRetrieveEqual(s.AttributesToRetrieve, s2.AttributesToRetrieve) {
		return false
	}
	if !opt.RankingEqual(s.Ranking, s2.Ranking) {
		return false
	}
	if !opt.CustomRankingEqual(s.CustomRanking, s2.CustomRanking) {
		return false
	}
	if !opt.ReplicasEqual(s.Replicas, s2.Replicas) {
		return false
	}
	if !opt.MaxValuesPerFacetEqual(s.MaxValuesPerFacet, s2.MaxValuesPerFacet) {
		return false
	}
	if !opt.SortFacetValuesByEqual(s.SortFacetValuesBy, s2.SortFacetValuesBy) {
		return false
	}
	if !opt.AttributesToHighlightEqual(s.AttributesToHighlight, s2.AttributesToHighlight) {
		return false
	}
	if !opt.AttributesToSnippetEqual(s.AttributesToSnippet, s2.AttributesToSnippet) {
		return false
	}
	if !opt.HighlightPreTagEqual(s.HighlightPreTag, s2.HighlightPreTag) {
		return false
	}
	if !opt.HighlightPostTagEqual(s.HighlightPostTag, s2.HighlightPostTag) {
		return false
	}
	if !opt.SnippetEllipsisTextEqual(s.SnippetEllipsisText, s2.SnippetEllipsisText) {
		return false
	}
	if !opt.RestrictHighlightAndSnippetArraysEqual(s.RestrictHighlightAndSnippetArrays, s2.RestrictHighlightAndSnippetArrays) {
		return false
	}
	if !opt.HitsPerPageEqual(s.HitsPerPage, s2.HitsPerPage) {
		return false
	}
	if !opt.PaginationLimitedToEqual(s.PaginationLimitedTo, s2.PaginationLimitedTo) {
		return false
	}
	if !opt.MinWordSizefor1TypoEqual(s.MinWordSizefor1Typo, s2.MinWordSizefor1Typo) {
		return false
	}
	if !opt.MinWordSizefor2TyposEqual(s.MinWordSizefor2Typos, s2.MinWordSizefor2Typos) {
		return false
	}
	if !opt.TypoToleranceEqual(s.TypoTolerance, s2.TypoTolerance) {
		return false
	}
	if !opt.AllowTyposOnNumericTokensEqual(s.AllowTyposOnNumericTokens, s2.AllowTyposOnNumericTokens) {
		return false
	}
	if !opt.DisableTypoToleranceOnAttributesEqual(s.DisableTypoToleranceOnAttributes, s2.DisableTypoToleranceOnAttributes) {
		return false
	}
	if !opt.DisableTypoToleranceOnWordsEqual(s.DisableTypoToleranceOnWords, s2.DisableTypoToleranceOnWords) {
		return false
	}
	if !opt.SeparatorsToIndexEqual(s.SeparatorsToIndex, s2.SeparatorsToIndex) {
		return false
	}
	if !opt.IgnorePluralsEqual(s.IgnorePlurals, s2.IgnorePlurals) {
		return false
	}
	if !opt.RemoveStopWordsEqual(s.RemoveStopWords, s2.RemoveStopWords) {
		return false
	}
	if !opt.CamelCaseAttributesEqual(s.CamelCaseAttributes, s2.CamelCaseAttributes) {
		return false
	}
	if !opt.DecompoundedAttributesEqual(s.DecompoundedAttributes, s2.DecompoundedAttributes) {
		return false
	}
	if !opt.KeepDiacriticsOnCharactersEqual(s.KeepDiacriticsOnCharacters, s2.KeepDiacriticsOnCharacters) {
		return false
	}
	if !opt.QueryLanguagesEqual(s.QueryLanguages, s2.QueryLanguages) {
		return false
	}
	if !opt.QueryTypeEqual(s.QueryType, s2.QueryType) {
		return false
	}
	if !opt.RemoveWordsIfNoResultsEqual(s.RemoveWordsIfNoResults, s2.RemoveWordsIfNoResults) {
		return false
	}
	if !opt.AdvancedSyntaxEqual(s.AdvancedSyntax, s2.AdvancedSyntax) {
		return false
	}
	if !opt.OptionalWordsEqual(s.OptionalWords, s2.OptionalWords) {
		return false
	}
	if !opt.DisablePrefixOnAttributesEqual(s.DisablePrefixOnAttributes, s2.DisablePrefixOnAttributes) {
		return false
	}
	if !opt.DisableExactOnAttributesEqual(s.DisableExactOnAttributes, s2.DisableExactOnAttributes) {
		return false
	}
	if !opt.ExactOnSingleWordQueryEqual(s.ExactOnSingleWordQuery, s2.ExactOnSingleWordQuery) {
		return false
	}
	if !opt.AlternativesAsExactEqual(s.AlternativesAsExact, s2.AlternativesAsExact) {
		return false
	}
	if !opt.AdvancedSyntaxFeaturesEqual(s.AdvancedSyntaxFeatures, s2.AdvancedSyntaxFeatures) {
		return false
	}
	if !opt.EnableRulesEqual(s.EnableRules, s2.EnableRules) {
		return false
	}
	if !opt.NumericAttributesForFilteringEqual(s.NumericAttributesForFiltering, s2.NumericAttributesForFiltering) {
		return false
	}
	if !opt.AllowCompressionOfIntegerArrayEqual(s.AllowCompressionOfIntegerArray, s2.AllowCompressionOfIntegerArray) {
		return false
	}
	if !opt.AttributeForDistinctEqual(s.AttributeForDistinct, s2.AttributeForDistinct) {
		return false
	}
	if !opt.DistinctEqual(s.Distinct, s2.Distinct) {
		return false
	}
	if !opt.ReplaceSynonymsInHighlightEqual(s.ReplaceSynonymsInHighlight, s2.ReplaceSynonymsInHighlight) {
		return false
	}
	if !opt.MinProximityEqual(s.MinProximity, s2.MinProximity) {
		return false
	}
	if !opt.ResponseFieldsEqual(s.ResponseFields, s2.ResponseFields) {
		return false
	}
	if !opt.MaxFacetHitsEqual(s.MaxFacetHits, s2.MaxFacetHits) {
		return false
	}
	return true
}
