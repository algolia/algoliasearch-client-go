Source:
  type: object
  additionalProperties: false
  properties:
    sourceID:
      $ref: './common.yml#/sourceID'
    type:
      $ref: '#/SourceType'
    name:
      type: string
    input:
      $ref: '#/SourceInput'
    authenticationID:
      $ref: './common.yml#/authenticationID'
    createdAt:
      $ref: './common.yml#/createdAt'
    updatedAt:
      $ref: './common.yml#/updatedAt'
  required:
    - sourceID
    - type
    - name
    - input
    - createdAt

SourceCreate:
  type: object
  additionalProperties: false
  properties:
    type:
      $ref: '#/SourceType'
    name:
      type: string
    input:
      $ref: '#/SourceInput'
    authenticationID:
      $ref: './common.yml#/authenticationID'
  required:
    - type
    - name
    - input
    - authenticationID

SourceCreateResponse:
  type: object
  additionalProperties: false
  properties:
    sourceID:
      $ref: './common.yml#/sourceID'
    name:
      type: string
    createdAt:
      $ref: './common.yml#/createdAt'
  required:
    - sourceID
    - name
    - createdAt

SourceUpdate:
  type: object
  additionalProperties: false
  properties:
    name:
      type: string
    input:
      $ref: '#/SourceUpdateInput'
    authenticationID:
      $ref: './common.yml#/authenticationID'

SourceUpdateResponse:
  type: object
  additionalProperties: false
  properties:
    sourceID:
      $ref: './common.yml#/sourceID'
    name:
      type: string
    updatedAt:
      $ref: './common.yml#/updatedAt'
  required:
    - sourceID
    - name
    - updatedAt

SourceSearch:
  type: object
  additionalProperties: false
  properties:
    sourceIDs:
      type: array
      items:
        type: string
  required:
    - sourceIDs

SourceType:
  type: string
  enum: ['bigcommerce', 'commercetools', 'json']

SourceCommercetools:
  type: object
  additionalProperties: false
  properties:
    storeKeys:
      type: array
      items:
        description: Unique and immutable key of the referenced Store.
        type: string
    locales:
      type: array
      description: >
        Array of locales that must match the following pattern: ^[a-z]{2}(-[A-Z]{2})?$. For example ["fr-FR", "en"].
      items:
        type: string
    url:
      type: string
    projectKey:
      type: string
  required:
    - url
    - projectKey

SourceBigCommerce:
  type: object
  additionalProperties: false
  properties:
    storeHash:
      type: string
      description: The store hash identifying the store the shopper is signing in to.
  required:
    - store_hash

MethodType:
  type: string
  enum: ['GET', 'POST']

SourceJson:
  type: object
  additionalProperties: false
  properties:
    url:
      type: string
      description: The URL of the file.
    method:
      $ref: '#/MethodType'
  required:
    - url

SourceInput:
  oneOf:
    - $ref: '#/SourceCommercetools'
    - $ref: '#/SourceBigCommerce'
    - $ref: '#/SourceJson'

SourceUpdateCommercetools:
  type: object
  additionalProperties: false
  properties:
    storeKeys:
      type: array
      description: Unique and immutable key of the referenced Store.
      items:
        type: string
    locales:
      type: array
      description: >
        Array of locales that must match the following pattern: ^[a-z]{2}(-[A-Z]{2})?$. For example ["fr-FR", "en"].
      items:
        type: string

SourceUpdateJson:
  type: object
  additionalProperties: false
  properties:
    url:
      type: string
      description: The URL of the file.
    method:
      $ref: '#/MethodType'
  required:
    - url

SourceUpdateInput:
  oneOf:
    - $ref: '#/SourceUpdateCommercetools'
    - $ref: '#/SourceUpdateJson'
